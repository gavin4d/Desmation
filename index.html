<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Desmotion</title>

    <link rel="stylesheet" href="styles.css">

    <!--https://www.desmos.com/api/v1.6/calculator.js?apiKey=dcb31709b452b1cf9dc26972add0fda6-->
    <script src="https://www.desmos.com/api/v1.6/calculator.js?apiKey=dcb31709b452b1cf9dc26972add0fda6"></script>
    <script src="jszip.js"></script>
    <script src="functions.js"></script>

</head>
<body>
    <div class="l-site">
        <div class="top-bar">
            <img
                alt="Desmotion"
                id="logo"
                src="img/desmotionLogoBeta.svg"
            >
        </div>
        <div class="toolbar">
            <div id="spacer"></div>
             <input id="edit-button" class="buttons" alt="Edit" title="Edit"
                onclick="
                document.getElementById('help-button').style.backgroundColor = '#1D3557';
                document.getElementById('edit-button').style.backgroundColor = '#2C405D';
                document.getElementById('color-button').style.backgroundColor = '#1D3557';
                document.getElementById('start-record-button').style.backgroundColor = '#1D3557';
                document.getElementById('settings').style.display = 'inherit';
                document.getElementById('calculator').style.display = 'inherit';
                document.getElementById('image').style.display = 'none';
                document.getElementById('record').style.display = 'none';
                document.getElementById('color-settings').style.display = 'none'
                document.getElementById('help').style.display = 'none';
                document.getElementById('instructions').style.display = 'none';
                document.getElementById('settings_container').style.height = '92.5vh';"
                type="image" src="img/062-pencil.svg" width="30" height="30">
             <input id="color-button" class="buttons" alt="Color Settings" title="Color Settings"
                onclick="
                document.getElementById('help-button').style.backgroundColor = '#1D3557';
                document.getElementById('color-button').style.backgroundColor = '#2C405D';
                document.getElementById('start-record-button').style.backgroundColor = '#1D3557';
                document.getElementById('edit-button').style.backgroundColor = '#1D3557';
                document.getElementById('color-settings').style.display = 'inherit'
                document.getElementById('settings').style.display = 'none';
                document.getElementById('calculator').style.display = 'inherit';
                document.getElementById('image').style.display = 'none';
                document.getElementById('record').style.display = 'none';
                document.getElementById('help').style.display = 'none';
                document.getElementById('instructions').style.display = 'none';
                document.getElementById('settings_container').style.height = '92.5vh';"
                type="image" src="img/paint-palette.svg" width="30" height="30">
             <input id="start-record-button" class="buttons" alt="Record" title="Record"
                onclick="
                document.getElementById('help-button').style.backgroundColor = '#1D3557';
                document.getElementById('start-record-button').style.backgroundColor = '#2C405D';
                document.getElementById('color-button').style.backgroundColor = '#1D3557';
                document.getElementById('edit-button').style.backgroundColor = '#1D3557';
                document.getElementById('settings').style.display = 'none';
                document.getElementById('image').style.display = 'none';
                document.getElementById('calculator').style.display = 'inherit';
                document.getElementById('record').style.display = 'inherit';
                document.getElementById('color-settings').style.display = 'none';
                document.getElementById('help').style.display = 'none';
                document.getElementById('instructions').style.display = 'none';
                document.getElementById('settings_container').style.height = '92.5vh';"
                type="image" src="img/digital-camera.svg" width="30" height="30">
            <input id="help-button" class="buttons" alt="Help" title="Help"
                onclick="
                document.getElementById('help-button').style.backgroundColor = '#2C405D';
                document.getElementById('start-record-button').style.backgroundColor = '#1D3557';
                document.getElementById('color-button').style.backgroundColor = '#1D3557';
                document.getElementById('edit-button').style.backgroundColor = '#1D3557';
                document.getElementById('settings').style.display = 'none';
                document.getElementById('image').style.display = 'none';
                document.getElementById('calculator').style.display = 'none';
                document.getElementById('record').style.display = 'none';
                document.getElementById('color-settings').style.display = 'none';
                document.getElementById('help').style.display = 'inherit';
                document.getElementById('instructions').style.display = 'inherit';"
                type="image" src="img/073-question.svg" width="30" height="30">
        </div>


        </div>

        <div class="l-page">
            <div id="calculator"></div>
            <div id="screenshot"></div>
            <div id="image"></div>
            <div id="instructions" class="text-format">
                <h1>How to animate with Desmotion:</h1>
                <h2>Create your animation</h2>
                <ol>
                    <li><h3>Enter a function</h3>
                        <ul>
                            <li>Add one or more functions to the expression list of the calculator.</li>
                            <li>Tip: You can paste a Desmos link into the expressions list to import a saved graph.</li>
                        </ul>
                    </li>
                    <li><h3>Add a slider variable</h3>
                        <ul>
                            <li>Enter at least one slider variable in the expressions list.<br><br></li>
                            <img
                                    alt="Add a slider variable"
                                    title="Add a slider variabe"
                                    src="img/add_slider.png"
                                    width ="450px"
                                >
                            <br>
                            <br>
                            <li>If you have more than one slider variable, you can choose which one to animate on the pull-down menu in the Edit tab.<br><br></li>
                            <img
                                    alt="Selecting a slider variable"
                                    title="Selecting a slider variable"
                                    src="img/slider_pulldown.png"
                                    width ="450px"
                                >
                            <br>
                            <br>
                            <li> Set the initial value and final value for the slider</li>
                            <u><b>Warning:</b></u> These are not determined by the slider in the calculator!<br><br>
                            <img
                                    alt="Check initial value"
                                    title="Check initial value"
                                    src="img/initial_value.png"
                                    width ="450px"
                                >
                            <br>
                            <br>
                            You should set these to the value you want the animated variable to start and end with.
                        </ul>
                    </li>
                    <li><h3>Animation settings (optional)</h3>
                        <ul>
                            <li>Adjust any parameters you'd like to change on the Edit tab, such as frame rate and animation duration.</li>
                        </ul>
                    </li>
                    <li><h3>Customize colors (optional)</h3>
                        <ul>
                            <li>Change any colors you'd like to in the Color Settings tab. </li>
                            <li>Note: Some color changes, such as background color, will not be reflected in the calculator window. These can be previewed in the Record tab.</li>
                        </ul>
                    </li>
                    <li><h3>Preview (optional)</h3>
                        <ul>
                            <li>Preview a screenshot in the Record tab.  This will display a single frame of your graph with the color settings you have chosen.</li>
                        </ul>
                    </li>
                    <li><h3>Record</h3>
                        <ul>
                            <li>In the Record tab, click the Record button to create your animation frames. You will see a preview of the full animation.</li>
                        </ul>
                    </li>
                </ol>
                <br>
                 <h2>Render your animation</h2>
                <ol>
                    <li><h3>Download your frames</h3>
                        <ul>
                            <li>Press the 'Download' button to download the zip file of all the frames needed to make your animation.</li>
                        </ul>
                    </li>
                    <li><h3>Install ffmpeg (Linux)</h3>
                        <ul>
                            <li>We designed this tool to work with the animation program ffmpeg on Linux (Windows and iOS instructions coming soon!)</li>
                            <li>In the Linux terminal, enter the following command: sudo apt install ffmpeg.  Type your password to start the installation.</li>
                        </ul>
                    </li>
                    <li><h3>Extract files </h3>
                        <ul>
                            <li>Find the output.zip file in your Downloads folder, right click, and choose 'Extract Here'.</li>
                        </ul>
                    </li>
                    <li><h3>Run the animation script</h3>
                        <ul>
                            <li>Look inside the unzipped 'output' folder.  It contains image files which are your animation frames and a script file called 'Convert to mp4.sh'.<br><br></li>
                            <img
                                    alt="Script file"
                                    title="Script file"
                                    src="img/script_file.png"
                                    width ="450px"
                                ><br><br>
                            <li>Right click on the 'Convert to mp4.sh' file and choose Properties, then select the Permissions tab.<br><br></li>
                            <img
                                    alt="Properties window"
                                    title="Properties window"
                                    src="img/properties_window.png"
                                    width ="450px"
                                ><br><br>
                            <li>Check the box titled 'Allow executing file as program'.<br><br></li>
                            <img
                                    alt="Allow executing file check box"
                                    title="Allow executing file check box"
                                    src="img/allow_execution.png"
                                    width ="450px"
                                ><br><br>
                            <li>Right click on your unzipped 'output' folder and choose 'Open in Terminal'.</li>
                            <li>Run the script with the following command: ./Convert\ to\ mp4.sh</li>
                        </ul>
                    </li>
                    <li><h3>You're done!</h3>
                        <ul>
                            <li>You can find your mp4 file in the same 'output' folder where the frames were saved.</li>
                        </ul>
                    </li>
                </ol>
            </div>

        </div>

        <div class="l-nav" id="settings_container">
            <div id="settings">
                <form id="config">
                    <label for="framerate">Framerate:</label><br>
                    <input type="number" step="any" value=30 id="framerate" name="framerate"><br>
                    <label for="duration">Duration:</label><br>
                    <input type="number" step="any" value=1 id="duration" name="duration"><br>
                    <!--<label for="lockDuration">Lock duration:</label>
                    <input type="checkbox" checked=true id="lockDuration" name="lockDuration"><br>-->
                    <label for="initalValue">Inital value:</label><br>
                    <input type="number" step="any" value=0 id="initalValue" name="initalValue"><br>
                    <label for="finalValue">Final value:</label><br>
                    <input type="number" step="any" value=1 id="finalValue" name="finalValue"><br>
                    <label for="step">Step size:</label><br>
                    <input type="number" step="any" value=0.034482758620689655 id="step" name="step"><br>
                    <label for="numFrames">Number of frames:</label><br>
                    <output type="number" id="numFrames" name="numFrames">30</output><br><br>
                    <label for="xPixels">X Pixels:</label><br>
                    <input type="number" value=800 id="xPixels" name="xPixels"><br>
                    <label for="yPixels">Y Pixels:</label><br>
                    <input type="number" value=800 id="yPixels" name="yPixels"><br>
                    <label for="xMathSize">X Math size:</label><br>
                    <input type="number" value=10 id="xMathSize" name="xMathSize"><br>
                    <label for="yMathSize">Y Math size:</label><br>
                    <input type="number" value=10 id="yMathSize" name="yMathSize"><br>
                    <label for="animationVar">Animated variable:</label><br>
                    <select id="animationVar" name="animationVar">
                    </select><br>
                </form>
            </div>

            <div id="color-settings">
                <form>
                    <label for="bcolor">Background color:</label><br>
                    <input type="color" value=#ffffff id="bcolor" name="bcolor"><br>
                    <label for="gcolor">Grid color:</label><br>
                    <input type="color" value=#000000 id="gcolor" name="gcolor"><br>
                    <p><br>Expression colors:</p>
                    <span id='expression-colors' class="color-numbers">
                        <label for="color1">1: </label>
                        <input type="color" value=#c74440 id="color1" fnId="1" name="color1">
                        <br>
                    </span>
                </form>
            </div>

            <div id="record">
                <button id="screenshot-button" class="record_controls">Preview</button><br>
                <button id="record-button" class="record_controls">Record</button><br>
                <button id="download-button" class="record_controls">Download</button><br>
                <p id="record-indicator"></p>
            </div>

            <div id="help">
                <p class="help-sidebar">Welcome to Desmotion!<br>
                    <br>
                    An animation tool for the <a href="https://www.desmos.com/calculator">Desmos graphing calculator</a>
                </p>
                <p class="help-sidebar">
                    Hosted by <a href="www.monkeyflowermath.com">Monkeyflower Math</a>
                </p>
                <p class="help-sidebar">Icons made by <br><a href="https://www.flaticon.com/authors/pixel-perfect" title="Pixel perfect">Pixel perfect</a>
                    <br>
                    from <a href="https://www.flaticon.com/" title="Flaticon">www.flaticon.com</a>
                </p>
                <p class="help-sidebar">
                    For some super cool Desmos hacks and hidden features, check out the unofficial Desmos blog <a href="https://desmosgraphunofficial.wordpress.com/">DesmosGraph</a>
                </p>
            </div>
        </div>
    </div>
</body>

    <script src="interface.js"></script>

</html>
